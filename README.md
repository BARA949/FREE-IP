# IP Tracker

## Overview
أداة خفيفة لتتبع النقر على الروابط وتسجيل عنوان IP والموقع الجغرافي التقريبي
(الدولة / المدينة) مع معلومات المتصفح.

## Features
- توليد رابط تتبع \(`/t/<token>`\)
- تسجيل IP، الدولة، المدينة، مزود الخدمة، والوقت
- إعادة توجيه المستخدم إلى رابط حقيقي بعد التسجيل
- واجهة JSON بسيطة لقراءة السجلات عبر `/visits`

## How It Works
1. يشغَّل خادم Flask على منفذ 5000.
2. ترسل للضحية رابطًا مثل:
   - `https://yourdomain.com/t/test1?next=https://google.com`
3. عند فتح الرابط:
   - يلتقط الخادم عنوان IP.
   - يستعلم عن الموقع الجغرافي عبر خدمة GeoIP (ip-api).
   - يسجّل بيانات الزيارة في ملف JSON.
   - يعيد توجيه المستخدم إلى الرابط الحقيقي (`next`).

## Files
- `config.yaml` — إعدادات الخادم، خدمة GeoIP، ومسار التخزين.
- `main.py` — نقطة تشغيل التطبيق (تحميل الإعدادات وتشغيل الخادم).
- `tracker.py` — تعريف مسارات Flask (`/t/<token>` و`/visits`).
- `geo.py` — دوال استعلام GeoIP.
- `storage.py` — دوال قراءة/كتابة سجل الزيارات.
- `requirements.txt` — المتطلبات (Flask, requests, PyYAML).

## Usage (local)
1. ثبّت المتطلبات:
   ```bash
   pip install -r requirements.txt
   ```
2. شغّل الخادم:
   ```bash
   python main.py
   ```
3. افتح المتصفح:
   - `http://127.0.0.1:5000/t/test1?next=https://google.com`
   - `http://127.0.0.1:5000/visits`

## Notes
- للحصول على IP حقيقي للضحية يجب نشر الخادم على سيرفر عام أو استخدام أداة tunneling مثل ngrok.
- خدمة GeoIP الافتراضية مجانية وقد تكون لها حدود أو دقّة تقريبية.
